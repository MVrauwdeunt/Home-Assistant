2021-10-11 11:23:06 WARNING (SyncWorker_1) [homeassistant.loader] We found a custom integration fullykiosk which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2021-10-11 11:23:06 WARNING (SyncWorker_2) [homeassistant.loader] We found a custom integration hacs which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2021-10-11 11:23:06 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration browser_mod which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2021-10-11 11:23:06 WARNING (SyncWorker_2) [homeassistant.loader] We found a custom integration ovapi which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2021-10-11 11:23:06 WARNING (SyncWorker_1) [homeassistant.loader] We found a custom integration climate_group which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2021-10-11 11:23:06 WARNING (SyncWorker_1) [homeassistant.loader] We found a custom integration readme which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2021-10-11 11:23:06 WARNING (SyncWorker_0) [homeassistant.loader] We found a custom integration adaptive_lighting which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2021-10-11 11:23:06 WARNING (SyncWorker_5) [homeassistant.loader] We found a custom integration grocy which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2021-10-11 11:23:06 WARNING (SyncWorker_4) [homeassistant.loader] We found a custom integration knmi which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2021-10-11 11:23:06 WARNING (SyncWorker_3) [homeassistant.loader] We found a custom integration monitor_docker which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2021-10-11 11:23:06 WARNING (SyncWorker_2) [homeassistant.loader] We found a custom integration buienalarm which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2021-10-11 11:23:06 WARNING (SyncWorker_6) [homeassistant.loader] We found a custom integration breaking_changes which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2021-10-11 11:23:06 WARNING (SyncWorker_7) [homeassistant.loader] We found a custom integration neerslag which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2021-10-11 11:23:08 ERROR (MainThread) [homeassistant.components.weather] The buienradar platform for the weather integration does not support platform setup. Please remove it from your config.
2021-10-11 11:23:09 WARNING (MainThread) [homeassistant.components.ssdp] Failed to setup listener for 0.0.0.0: [Errno 98] Address in use
2021-10-11 11:23:09 WARNING (MainThread) [zigpy.zcl] Unknown cluster 61184
2021-10-11 11:23:09 WARNING (MainThread) [zigpy.zcl] Unknown cluster 61184
2021-10-11 11:23:11 ERROR (MainThread) [homeassistant.components.binary_sensor] grocy: Error on device update!
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity_platform.py", line 431, in _async_add_entity
    await entity.async_device_update(warning=False)
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 618, in async_device_update
    await task
  File "/config/custom_components/grocy/entity.py", line 57, in async_update
    await self.coordinator.async_request_refresh()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 141, in async_request_refresh
    await self._debounced_refresh.async_call()
  File "/usr/src/homeassistant/homeassistant/helpers/debounce.py", line 78, in async_call
    await task
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 165, in async_refresh
    await self._async_refresh(log_failures=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:23:15 WARNING (MainThread) [homeassistant.components.zha.core.channels.base] [0xE27B:1:0x0702]: async_initialize: all attempts have failed: [DeliveryError('[0xe27b:1:0x0702]: Message send failure'), DeliveryError('[0xe27b:1:0x0702]: Message send failure'), DeliveryError('[0xe27b:1:0x0702]: Message send failure'), DeliveryError('[0xe27b:1:0x0702]: Message send failure')]
2021-10-11 11:23:15 WARNING (MainThread) [homeassistant.components.zha.core.channels.base] [0xE27B:1:0x0b04]: async_initialize: all attempts have failed: [DeliveryError('[0xe27b:1:0x0b04]: Message send failure'), DeliveryError('[0xe27b:1:0x0b04]: Message send failure'), DeliveryError('[0xe27b:1:0x0b04]: Message send failure'), DeliveryError('[0xe27b:1:0x0b04]: Message send failure')]
2021-10-11 11:23:17 ERROR (SyncWorker_0) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 11:23:17 WARNING (SyncWorker_0) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 11:23:21 ERROR (MainThread) [homeassistant.components.sensor] grocy: Error on device update!
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/entity_platform.py", line 431, in _async_add_entity
    await entity.async_device_update(warning=False)
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 618, in async_device_update
    await task
  File "/config/custom_components/grocy/entity.py", line 57, in async_update
    await self.coordinator.async_request_refresh()
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 141, in async_request_refresh
    await self._debounced_refresh.async_call()
  File "/usr/src/homeassistant/homeassistant/helpers/debounce.py", line 78, in async_call
    await task
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 165, in async_refresh
    await self._async_refresh(log_failures=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:23:27 WARNING (MainThread) [homeassistant.components.sensor] Setup of sensor platform command_line is taking over 10 seconds.
2021-10-11 11:23:27 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'float' got invalid input 'unknown' when rendering template '{{ states('sensor.curtains_front')|float > 0 }}' but no default was specified. Currently 'float' will return '0', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:23:27 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'float' got invalid input 'unknown' when rendering template '{{ states('sensor.curtains_front')|float > 0 }}' but no default was specified. Currently 'float' will return '0', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:23:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 11:23:27 ERROR (MainThread) [homeassistant.helpers.event] Error while processing template: Template("{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}")
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 397, in async_render
    render_result = _render_with_context(self.template, compiled, **kwargs)
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 1604, in _render_with_context
    return template.render(**kwargs)
  File "/usr/local/lib/python3.9/site-packages/jinja2/environment.py", line 1304, in render
    self.environment.handle_exception()
  File "/usr/local/lib/python3.9/site-packages/jinja2/environment.py", line 925, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "<template>", line 1, in top-level template code
  File "/usr/local/lib/python3.9/site-packages/jinja2/sandbox.py", line 326, in getattr
    value = getattr(obj, attribute)
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 1630, in _fail_with_undefined_error
    raise ex
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 1621, in _fail_with_undefined_error
    return super()._fail_with_undefined_error(*args, **kwargs)
jinja2.exceptions.UndefinedError: list object has no element 6

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 513, in async_render_to_info
    render_info._result = self.async_render(variables, strict=strict, **kwargs)
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 399, in async_render
    raise TemplateError(err) from err
homeassistant.exceptions.TemplateError: UndefinedError: list object has no element 6
2021-10-11 11:23:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 11:23:27 ERROR (MainThread) [homeassistant.components.template.template_entity] TemplateError('UndefinedError: list object has no element 6') while processing template 'Template("{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}")' for attribute 'step_6' in entity 'sensor.cooking'
2021-10-11 11:23:27 ERROR (MainThread) [homeassistant.helpers.event] Error while processing template: Template("{%- for i in state_attr('sensor.grocy_stock', 'products') %} {%- if i.id == 93 %} {{ i.available_amount | round }} {%- endif %} {%- endfor %}")
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 397, in async_render
    render_result = _render_with_context(self.template, compiled, **kwargs)
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 1604, in _render_with_context
    return template.render(**kwargs)
  File "/usr/local/lib/python3.9/site-packages/jinja2/environment.py", line 1304, in render
    self.environment.handle_exception()
  File "/usr/local/lib/python3.9/site-packages/jinja2/environment.py", line 925, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "<template>", line 1, in top-level template code
TypeError: 'NoneType' object is not iterable

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 513, in async_render_to_info
    render_info._result = self.async_render(variables, strict=strict, **kwargs)
  File "/usr/src/homeassistant/homeassistant/helpers/template.py", line 399, in async_render
    raise TemplateError(err) from err
homeassistant.exceptions.TemplateError: TypeError: 'NoneType' object is not iterable
2021-10-11 11:23:27 ERROR (MainThread) [homeassistant.components.template.template_entity] TemplateError('TypeError: 'NoneType' object is not iterable') while processing template 'Template("{%- for i in state_attr('sensor.grocy_stock', 'products') %} {%- if i.id == 93 %} {{ i.available_amount | round }} {%- endif %} {%- endfor %}")' for attribute '_attr_native_value' in entity 'sensor.kattenvoer'
2021-10-11 11:23:28 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:23:28 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:23:28 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:23:28 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:23:28 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:23:28 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:23:28 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:23:28 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:23:28 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:23:28 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:23:28 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:23:28 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:23:28 WARNING (MainThread) [homeassistant.helpers.service] Unable to find referenced entities climate.radiator_zithoek
2021-10-11 11:23:53 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:23:56 WARNING (MainThread) [homeassistant.components.zha.core.channels.base] [0xE27B:1:0x0006]: async_initialize: all attempts have failed: [DeliveryError('[0xe27b:1:0x0006]: Message send failure'), DeliveryError('[0xe27b:1:0x0006]: Message send failure'), DeliveryError('[0xe27b:1:0x0006]: Message send failure'), DeliveryError('[0xe27b:1:0x0006]: Message send failure')]
2021-10-11 11:24:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:24:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:24:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:24:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:24:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:24:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:24:17 ERROR (SyncWorker_5) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 11:24:17 WARNING (SyncWorker_5) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 11:24:26 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:24:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 11:25:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:25:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:25:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:25:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:25:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:25:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:25:00 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:25:17 ERROR (SyncWorker_2) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 11:25:17 WARNING (SyncWorker_2) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 11:25:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 11:25:32 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:26:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:26:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:26:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:26:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:26:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:26:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:26:04 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:26:17 ERROR (SyncWorker_10) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 11:26:17 WARNING (SyncWorker_10) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 11:26:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 11:26:36 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:27:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:27:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:27:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:27:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:27:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:27:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:27:08 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:27:17 ERROR (SyncWorker_2) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 11:27:17 WARNING (SyncWorker_2) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 11:27:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 11:27:40 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:28:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:28:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:28:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:28:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:28:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:28:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:28:12 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:28:17 ERROR (SyncWorker_8) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 11:28:17 WARNING (SyncWorker_8) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 11:28:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 11:28:29 ERROR (MainThread) [homeassistant.components.shell_command] Error running command: `/config/scripts/ha_gitpush.sh`, return code: 128
NoneType: None
2021-10-11 11:28:44 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:29:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:29:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:29:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:29:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:29:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:29:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:29:16 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:29:17 ERROR (SyncWorker_8) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 11:29:17 WARNING (SyncWorker_8) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 11:29:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 11:29:48 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:30:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:30:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:30:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:30:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:30:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:30:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:30:17 ERROR (SyncWorker_9) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 11:30:17 WARNING (SyncWorker_9) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 11:30:21 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:30:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 11:30:53 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:31:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:31:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:31:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:31:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:31:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:31:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:31:17 ERROR (SyncWorker_9) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 11:31:17 WARNING (SyncWorker_9) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 11:31:26 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:31:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 11:31:58 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:32:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:32:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:32:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:32:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:32:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:32:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:32:17 ERROR (SyncWorker_11) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 11:32:17 WARNING (SyncWorker_11) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 11:32:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 11:32:30 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:33:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:33:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:33:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:33:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:33:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:33:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:33:03 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:33:17 ERROR (SyncWorker_10) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 11:33:17 WARNING (SyncWorker_10) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 11:33:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 11:33:35 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:34:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:34:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:34:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:34:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:34:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:34:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:34:07 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:34:17 ERROR (SyncWorker_7) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 11:34:17 WARNING (SyncWorker_7) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 11:34:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 11:34:39 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:35:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:35:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:35:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:35:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:35:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:35:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:35:11 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:35:17 ERROR (SyncWorker_5) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 11:35:17 WARNING (SyncWorker_5) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 11:35:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 11:35:43 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:36:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:36:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:36:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:36:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:36:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:36:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:36:15 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:36:17 ERROR (SyncWorker_9) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 11:36:17 WARNING (SyncWorker_9) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 11:36:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 11:36:47 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:37:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:37:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:37:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:37:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:37:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:37:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:37:17 ERROR (SyncWorker_1) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 11:37:17 WARNING (SyncWorker_1) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 11:37:20 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:37:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 11:37:52 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:38:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:38:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:38:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:38:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:38:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:38:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:38:17 ERROR (SyncWorker_6) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 11:38:17 WARNING (SyncWorker_6) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 11:38:25 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:38:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 11:38:57 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:39:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:39:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:39:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:39:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:39:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:39:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:39:17 ERROR (SyncWorker_4) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 11:39:17 WARNING (SyncWorker_4) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 11:39:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 11:39:29 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:40:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:40:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:40:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:40:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:40:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:40:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:40:02 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:40:17 ERROR (SyncWorker_13) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 11:40:17 WARNING (SyncWorker_13) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 11:40:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 11:40:34 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:41:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:41:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:41:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:41:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:41:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:41:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:41:06 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:41:17 ERROR (SyncWorker_11) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 11:41:17 WARNING (SyncWorker_11) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 11:41:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 11:41:38 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:42:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:42:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:42:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:42:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:42:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:42:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:42:10 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:42:17 ERROR (SyncWorker_10) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 11:42:17 WARNING (SyncWorker_10) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 11:42:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 11:42:42 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:43:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:43:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:43:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:43:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:43:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:43:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:43:14 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:43:17 ERROR (SyncWorker_1) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 11:43:17 WARNING (SyncWorker_1) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 11:43:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 11:43:46 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:44:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:44:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:44:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:44:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:44:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:44:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:44:17 ERROR (SyncWorker_6) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 11:44:17 WARNING (SyncWorker_6) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 11:44:18 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:44:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 11:44:50 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:45:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:45:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:45:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:45:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:45:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:45:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:45:17 ERROR (SyncWorker_13) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 11:45:17 WARNING (SyncWorker_13) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 11:45:23 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:45:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 11:45:55 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:46:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:46:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:46:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:46:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:46:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:46:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:46:17 ERROR (SyncWorker_6) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 11:46:17 WARNING (SyncWorker_6) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 11:46:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 11:46:27 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:46:59 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:47:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:47:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:47:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:47:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:47:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:47:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:47:17 ERROR (SyncWorker_4) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 11:47:17 WARNING (SyncWorker_4) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 11:47:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 11:47:31 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:48:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:48:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:48:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:48:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:48:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:48:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:48:03 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:48:17 ERROR (SyncWorker_4) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 11:48:17 WARNING (SyncWorker_4) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 11:48:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 11:48:35 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:49:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:49:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:49:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:49:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:49:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:49:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:49:07 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:49:17 ERROR (SyncWorker_3) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 11:49:17 WARNING (SyncWorker_3) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 11:49:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 11:49:39 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:50:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:50:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:50:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:50:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:50:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:50:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:50:11 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:50:17 ERROR (SyncWorker_4) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 11:50:17 WARNING (SyncWorker_4) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 11:50:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 11:50:43 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:51:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:51:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:51:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:51:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:51:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:51:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:51:15 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:51:17 ERROR (SyncWorker_5) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 11:51:17 WARNING (SyncWorker_5) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 11:51:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 11:51:47 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:52:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:52:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:52:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:52:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:52:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:52:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:52:17 ERROR (SyncWorker_4) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 11:52:17 WARNING (SyncWorker_4) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 11:52:20 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:52:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 11:52:52 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:53:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:53:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:53:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:53:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:53:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:53:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:53:17 ERROR (SyncWorker_12) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 11:53:17 WARNING (SyncWorker_12) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 11:53:25 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:53:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 11:53:57 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:54:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:54:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:54:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:54:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:54:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:54:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:54:17 ERROR (SyncWorker_1) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 11:54:17 WARNING (SyncWorker_1) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 11:54:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 11:54:29 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:55:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:55:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:55:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:55:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:55:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:55:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:55:02 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:55:17 ERROR (SyncWorker_2) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 11:55:17 WARNING (SyncWorker_2) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 11:55:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 11:55:34 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:56:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:56:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:56:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:56:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:56:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:56:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:56:06 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:56:17 ERROR (SyncWorker_10) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 11:56:17 WARNING (SyncWorker_10) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 11:56:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 11:56:38 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:57:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:57:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:57:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:57:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:57:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:57:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:57:10 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:57:17 ERROR (SyncWorker_4) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 11:57:17 WARNING (SyncWorker_4) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 11:57:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 11:57:42 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:58:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:58:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:58:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:58:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:58:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:58:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:58:14 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:58:17 ERROR (SyncWorker_9) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 11:58:17 WARNING (SyncWorker_9) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 11:58:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 11:58:46 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:59:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:59:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:59:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:59:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:59:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:59:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 11:59:17 ERROR (SyncWorker_12) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 11:59:17 WARNING (SyncWorker_12) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 11:59:18 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 11:59:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 11:59:50 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:00:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:00:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:00:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:00:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:00:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:00:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:00:17 ERROR (SyncWorker_4) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:00:17 WARNING (SyncWorker_4) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:00:23 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:00:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:00:55 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:01:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:01:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:01:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:01:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:01:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:01:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:01:17 ERROR (SyncWorker_4) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:01:17 WARNING (SyncWorker_4) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:01:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:01:28 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:02:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:02:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:02:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:02:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:02:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:02:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:02:01 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:02:17 ERROR (SyncWorker_12) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:02:17 WARNING (SyncWorker_12) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:02:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:02:33 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:03:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:03:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:03:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:03:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:03:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:03:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:03:05 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:03:17 ERROR (SyncWorker_1) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:03:17 WARNING (SyncWorker_1) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:03:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:03:37 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:04:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:04:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:04:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:04:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:04:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:04:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:04:09 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:04:17 ERROR (SyncWorker_13) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:04:17 WARNING (SyncWorker_13) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:04:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:04:41 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:05:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:05:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:05:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:05:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:05:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:05:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:05:13 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:05:17 ERROR (SyncWorker_3) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:05:17 WARNING (SyncWorker_3) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:05:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:05:45 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:06:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:06:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:06:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:06:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:06:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:06:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:06:17 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:06:17 ERROR (SyncWorker_6) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:06:17 WARNING (SyncWorker_6) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:06:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:06:49 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:07:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:07:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:07:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:07:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:07:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:07:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:07:17 ERROR (SyncWorker_3) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:07:17 WARNING (SyncWorker_3) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:07:22 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:07:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:07:55 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:08:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:08:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:08:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:08:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:08:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:08:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:08:17 ERROR (SyncWorker_4) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:08:17 WARNING (SyncWorker_4) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:08:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:08:28 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:09:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:09:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:09:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:09:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:09:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:09:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:09:01 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:09:11 WARNING (MainThread) [zigpy.zcl] [0xad5b:1:0xef00] Unknown cluster-specific command 17
2021-10-11 12:09:12 WARNING (MainThread) [zigpy.zcl] [0xad5b:1:0xef00] Unknown cluster-specific command 17
2021-10-11 12:09:17 ERROR (SyncWorker_7) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:09:17 WARNING (SyncWorker_7) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:09:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:09:33 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:10:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:10:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:10:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:10:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:10:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:10:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:10:05 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:10:17 ERROR (SyncWorker_3) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:10:17 WARNING (SyncWorker_3) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:10:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:10:37 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:11:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:11:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:11:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:11:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:11:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:11:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:11:09 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:11:17 ERROR (SyncWorker_1) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:11:17 WARNING (SyncWorker_1) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:11:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:11:41 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:12:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:12:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:12:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:12:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:12:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:12:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:12:13 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:12:17 ERROR (SyncWorker_5) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:12:17 WARNING (SyncWorker_5) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:12:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:12:45 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:13:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:13:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:13:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:13:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:13:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:13:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:13:17 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:13:17 ERROR (SyncWorker_5) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:13:17 WARNING (SyncWorker_5) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:13:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:13:49 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:14:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:14:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:14:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:14:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:14:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:14:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:14:17 ERROR (SyncWorker_7) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:14:17 WARNING (SyncWorker_7) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:14:22 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:14:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:14:54 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:15:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:15:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:15:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:15:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:15:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:15:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:15:17 ERROR (SyncWorker_12) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:15:17 WARNING (SyncWorker_12) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:15:27 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:15:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:15:59 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:16:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:16:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:16:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:16:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:16:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:16:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:16:17 ERROR (SyncWorker_1) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:16:17 WARNING (SyncWorker_1) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:16:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:16:31 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:17:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:17:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:17:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:17:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:17:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:17:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:17:03 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:17:17 ERROR (SyncWorker_6) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:17:17 WARNING (SyncWorker_6) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:17:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:17:35 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:18:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:18:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:18:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:18:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:18:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:18:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:18:07 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:18:17 ERROR (SyncWorker_9) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:18:17 WARNING (SyncWorker_9) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:18:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:18:39 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:19:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:19:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:19:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:19:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:19:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:19:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:19:11 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:19:17 ERROR (SyncWorker_10) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:19:17 WARNING (SyncWorker_10) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:19:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:19:43 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:20:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:20:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:20:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:20:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:20:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:20:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:20:15 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:20:17 ERROR (SyncWorker_11) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:20:17 WARNING (SyncWorker_11) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:20:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:20:47 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:21:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:21:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:21:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:21:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:21:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:21:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:21:17 ERROR (SyncWorker_2) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:21:17 WARNING (SyncWorker_2) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:21:20 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:21:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:21:52 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:22:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:22:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:22:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:22:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:22:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:22:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:22:17 ERROR (SyncWorker_8) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:22:17 WARNING (SyncWorker_8) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:22:25 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:22:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:22:57 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:23:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:23:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:23:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:23:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:23:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:23:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:23:17 ERROR (SyncWorker_4) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:23:17 WARNING (SyncWorker_4) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:23:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:23:29 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:24:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:24:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:24:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:24:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:24:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:24:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:24:01 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:24:17 ERROR (SyncWorker_11) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:24:17 WARNING (SyncWorker_11) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:24:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:24:33 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:25:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:25:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:25:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:25:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:25:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:25:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:25:05 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:25:17 ERROR (SyncWorker_6) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:25:17 WARNING (SyncWorker_6) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:25:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:25:37 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:26:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:26:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:26:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:26:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:26:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:26:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:26:09 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:26:17 ERROR (SyncWorker_12) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:26:17 WARNING (SyncWorker_12) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:26:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:26:41 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:27:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:27:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:27:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:27:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:27:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:27:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:27:13 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:27:17 ERROR (SyncWorker_10) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:27:17 WARNING (SyncWorker_10) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:27:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:27:45 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:28:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:28:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:28:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:28:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:28:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:28:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:28:11 WARNING (MainThread) [homeassistant.helpers.template] Template variable warning: 'grocy_key' is undefined when rendering '-X POST https://grocy.gladsheimr.nl/api/recipes/{{recipe_id}}/add-not-fulfilled-products-to-shoppinglist-H 'Accept: application/json' -H 'Content-Type: application/json' -H 'GROCY-API-KEY: {{grocy_key}}' -H 'cache-control: no-cache' -d '{'excludedProductIds': [0]}''
2021-10-11 12:28:12 ERROR (MainThread) [homeassistant.components.shell_command] Error running command: `curl -X POST https://grocy.gladsheimr.nl/api/recipes/{{recipe_id}}/add-not-fulfilled-products-to-shoppinglist-H 'Accept: application/json' -H 'Content-Type: application/json' -H 'GROCY-API-KEY: {{grocy_key}}' -H 'cache-control: no-cache' -d '{'excludedProductIds': [0]}'`, return code: 3
NoneType: None
2021-10-11 12:28:17 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:28:17 ERROR (SyncWorker_4) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:28:17 WARNING (SyncWorker_4) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:28:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:28:49 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:29:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:29:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:29:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:29:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:29:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:29:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:29:17 ERROR (SyncWorker_1) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:29:17 WARNING (SyncWorker_1) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:29:22 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:29:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:29:48 ERROR (MainThread) [homeassistant.components.shell_command] Error running command: `curl -X POST https://grocy.gladsheimr.nl/api/recipes/{{recipe_id}}/add-not-fulfilled-products-to-shoppinglist-H 'Accept: application/json' -H 'Content-Type: application/json' -H 'GROCY-API-KEY: {{grocy_key}}' -H 'cache-control: no-cache' -d '{'excludedProductIds': [0]}'`, return code: 3
NoneType: None
2021-10-11 12:29:54 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:30:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:30:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:30:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:30:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:30:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:30:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:30:17 ERROR (SyncWorker_7) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:30:17 WARNING (SyncWorker_7) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:30:19 ERROR (MainThread) [homeassistant.components.shell_command] Error running command: `curl -X POST https://grocy.gladsheimr.nl/api/recipes/{{recipe_id}}/add-not-fulfilled-products-to-shoppinglist-H 'Accept: application/json' -H 'Content-Type: application/json' -H 'GROCY-API-KEY: {{grocy_key}}' -H 'cache-control: no-cache' -d '{'excludedProductIds': [0]}'`, return code: 3
NoneType: None
2021-10-11 12:30:27 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:30:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:30:59 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:31:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:31:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:31:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:31:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:31:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:31:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:31:17 ERROR (SyncWorker_7) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:31:17 WARNING (SyncWorker_7) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:31:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:31:31 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:32:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:32:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:32:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:32:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:32:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:32:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:32:03 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:32:17 ERROR (SyncWorker_1) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:32:17 WARNING (SyncWorker_1) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:32:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:32:35 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:33:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:33:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:33:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:33:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:33:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:33:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:33:07 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:33:17 ERROR (SyncWorker_5) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:33:17 WARNING (SyncWorker_5) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:33:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:33:39 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:34:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:34:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:34:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:34:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:34:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:34:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:34:12 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:34:17 ERROR (SyncWorker_0) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:34:17 WARNING (SyncWorker_0) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:34:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:34:44 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:35:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:35:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:35:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:35:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:35:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:35:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:35:16 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:35:17 ERROR (SyncWorker_5) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:35:17 WARNING (SyncWorker_5) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:35:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:35:48 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:36:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:36:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:36:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:36:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:36:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:36:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:36:17 ERROR (SyncWorker_5) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:36:17 WARNING (SyncWorker_5) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:36:21 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:36:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:36:53 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:37:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:37:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:37:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:37:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:37:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:37:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:37:17 ERROR (SyncWorker_12) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:37:17 WARNING (SyncWorker_12) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:37:26 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:37:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:37:58 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:38:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:38:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:38:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:38:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:38:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:38:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:38:17 ERROR (SyncWorker_0) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:38:17 WARNING (SyncWorker_0) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:38:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:38:30 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:39:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:39:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:39:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:39:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:39:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:39:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:39:02 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:39:17 ERROR (SyncWorker_12) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:39:17 WARNING (SyncWorker_12) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:39:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:39:34 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:40:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:40:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:40:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:40:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:40:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:40:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:40:07 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:40:17 ERROR (SyncWorker_7) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:40:17 WARNING (SyncWorker_7) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:40:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:40:40 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:41:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:41:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:41:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:41:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:41:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:41:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:41:13 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:41:17 ERROR (SyncWorker_9) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:41:17 WARNING (SyncWorker_9) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:41:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:41:45 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:42:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:42:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:42:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:42:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:42:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:42:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:42:17 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:42:17 ERROR (SyncWorker_11) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:42:17 WARNING (SyncWorker_11) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:42:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:42:49 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:43:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:43:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:43:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:43:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:43:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:43:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:43:17 ERROR (SyncWorker_7) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:43:17 WARNING (SyncWorker_7) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:43:22 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:43:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:43:54 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:44:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:44:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:44:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:44:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:44:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:44:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:44:17 ERROR (SyncWorker_5) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:44:17 WARNING (SyncWorker_5) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:44:27 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:44:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:44:59 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:45:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:45:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:45:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:45:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:45:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:45:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:45:17 ERROR (SyncWorker_0) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:45:17 WARNING (SyncWorker_0) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:45:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:45:31 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:46:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:46:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:46:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:46:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:46:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:46:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:46:03 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:46:17 ERROR (SyncWorker_5) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:46:17 WARNING (SyncWorker_5) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:46:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:46:35 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:47:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:47:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:47:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:47:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:47:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:47:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:47:07 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:47:17 ERROR (SyncWorker_7) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:47:17 WARNING (SyncWorker_7) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:47:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:47:39 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:48:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:48:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:48:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:48:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:48:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:48:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:48:11 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:48:17 ERROR (SyncWorker_11) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:48:17 WARNING (SyncWorker_11) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:48:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:48:43 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:49:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:49:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:49:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:49:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:49:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:49:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:49:15 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:49:17 ERROR (SyncWorker_9) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:49:17 WARNING (SyncWorker_9) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:49:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:49:47 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:50:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:50:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:50:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:50:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:50:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:50:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:50:17 ERROR (SyncWorker_12) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:50:17 WARNING (SyncWorker_12) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:50:20 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:50:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:50:52 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:51:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:51:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:51:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:51:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:51:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:51:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:51:17 ERROR (SyncWorker_5) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:51:17 WARNING (SyncWorker_5) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:51:25 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:51:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:51:57 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:52:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:52:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:52:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:52:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:52:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:52:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:52:17 ERROR (SyncWorker_6) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:52:17 WARNING (SyncWorker_6) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:52:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:52:29 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:53:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:53:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:53:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:53:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:53:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:53:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:53:01 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:53:17 ERROR (SyncWorker_12) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:53:17 WARNING (SyncWorker_12) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:53:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:53:33 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:54:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:54:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:54:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:54:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:54:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:54:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:54:05 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:54:17 ERROR (SyncWorker_0) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:54:17 WARNING (SyncWorker_0) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:54:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:54:37 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:55:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:55:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:55:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:55:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:55:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:55:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:55:09 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:55:17 ERROR (SyncWorker_3) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:55:17 WARNING (SyncWorker_3) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:55:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:55:41 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:56:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:56:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:56:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:56:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:56:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:56:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:56:14 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:56:17 ERROR (SyncWorker_4) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:56:17 WARNING (SyncWorker_4) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:56:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:56:46 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:57:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:57:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:57:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:57:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:57:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:57:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:57:17 ERROR (SyncWorker_12) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:57:17 WARNING (SyncWorker_12) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:57:18 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:57:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:57:50 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:58:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:58:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:58:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:58:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:58:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:58:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:58:17 ERROR (SyncWorker_1) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:58:17 WARNING (SyncWorker_1) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:58:23 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:58:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:58:55 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 12:59:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:59:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:59:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:59:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:59:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:59:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 12:59:14 ERROR (SyncWorker_10) [homeassistant.components.command_line] Command failed: ssh osmc@baldr 'echo "pow 0" | /usr/osmc/bin/cec-client -s -d 1 | grep "power status:"'
2021-10-11 12:59:17 ERROR (SyncWorker_6) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 12:59:17 WARNING (SyncWorker_6) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:59:23 ERROR (SyncWorker_8) [homeassistant.components.command_line] Command failed: /config/scripts/get_recipies.py
2021-10-11 12:59:23 WARNING (SyncWorker_8) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 12:59:23 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: None has no element 4 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].name }}'
2021-10-11 12:59:23 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: None has no element 4 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].id}}'
2021-10-11 12:59:23 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: None has no element 4 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[1].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:59:23 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: None has no element 4 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[2].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:59:23 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: None has no element 4 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[3].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:59:23 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: None has no element 4 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[4].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:59:23 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: None has no element 4 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[5].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:59:23 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: None has no element 4 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 12:59:23 ERROR (MainThread) [homeassistant.components.template.template_entity] TemplateError('UndefinedError: None has no element 4') while processing template 'Template("{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].name }}")' for attribute '_attr_native_value' in entity 'sensor.cooking'
2021-10-11 12:59:23 ERROR (MainThread) [homeassistant.components.template.template_entity] TemplateError('UndefinedError: None has no element 4') while processing template 'Template("{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].id}}")' for attribute 'recipe_id' in entity 'sensor.cooking'
2021-10-11 12:59:23 ERROR (MainThread) [homeassistant.components.template.template_entity] TemplateError('UndefinedError: None has no element 4') while processing template 'Template("{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[1].split('<br />')[0]|replace('</li>','')}}")' for attribute 'step_1' in entity 'sensor.cooking'
2021-10-11 12:59:23 ERROR (MainThread) [homeassistant.components.template.template_entity] TemplateError('UndefinedError: None has no element 4') while processing template 'Template("{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[2].split('<br />')[0]|replace('</li>','')}}")' for attribute 'step_2' in entity 'sensor.cooking'
2021-10-11 12:59:23 ERROR (MainThread) [homeassistant.components.template.template_entity] TemplateError('UndefinedError: None has no element 4') while processing template 'Template("{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[3].split('<br />')[0]|replace('</li>','')}}")' for attribute 'step_3' in entity 'sensor.cooking'
2021-10-11 12:59:23 ERROR (MainThread) [homeassistant.components.template.template_entity] TemplateError('UndefinedError: None has no element 4') while processing template 'Template("{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[4].split('<br />')[0]|replace('</li>','')}}")' for attribute 'step_4' in entity 'sensor.cooking'
2021-10-11 12:59:23 ERROR (MainThread) [homeassistant.components.template.template_entity] TemplateError('UndefinedError: None has no element 4') while processing template 'Template("{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[5].split('<br />')[0]|replace('</li>','')}}")' for attribute 'step_5' in entity 'sensor.cooking'
2021-10-11 12:59:28 ERROR (MainThread) [aiohttp.server] Error handling request
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/urllib3/connection.py", line 174, in _new_conn
    conn = connection.create_connection(
  File "/usr/local/lib/python3.9/site-packages/urllib3/util/connection.py", line 73, in create_connection
    for res in socket.getaddrinfo(host, port, family, socket.SOCK_STREAM):
  File "/usr/local/lib/python3.9/socket.py", line 954, in getaddrinfo
    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
socket.gaierror: [Errno -3] Try again

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py", line 699, in urlopen
    httplib_response = self._make_request(
  File "/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py", line 382, in _make_request
    self._validate_conn(conn)
  File "/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py", line 1010, in _validate_conn
    conn.connect()
  File "/usr/local/lib/python3.9/site-packages/urllib3/connection.py", line 358, in connect
    conn = self._new_conn()
  File "/usr/local/lib/python3.9/site-packages/urllib3/connection.py", line 186, in _new_conn
    raise NewConnectionError(
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPSConnection object at 0x7f30c304fb20>: Failed to establish a new connection: [Errno -3] Try again

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/requests/adapters.py", line 439, in send
    resp = conn.urlopen(
  File "/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py", line 755, in urlopen
    retries = retries.increment(
  File "/usr/local/lib/python3.9/site-packages/urllib3/util/retry.py", line 574, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPSConnectionPool(host='box.openmailbox.nl', port=443): Max retries exceeded with url: /cloud/remote.php/dav/calendars/m.vrauwdeunt%40openmailbox.nl/werkrooster/ (Caused by NewConnectionError('<urllib3.connection.HTTPSConnection object at 0x7f30c304fb20>: Failed to establish a new connection: [Errno -3] Try again'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/aiohttp/web_protocol.py", line 422, in _handle_request
    resp = await self._request_handler(request)
  File "/usr/local/lib/python3.9/site-packages/aiohttp/web_app.py", line 499, in _handle
    resp = await handler(request)
  File "/usr/local/lib/python3.9/site-packages/aiohttp/web_middlewares.py", line 119, in impl
    return await handler(request)
  File "/usr/src/homeassistant/homeassistant/components/http/security_filter.py", line 60, in security_filter_middleware
    return await handler(request)
  File "/usr/src/homeassistant/homeassistant/components/http/forwarded.py", line 220, in forwarded_middleware
    return await handler(request)
  File "/usr/src/homeassistant/homeassistant/components/http/request_context.py", line 24, in request_context_middleware
    return await handler(request)
  File "/usr/src/homeassistant/homeassistant/components/http/ban.py", line 78, in ban_middleware
    return await handler(request)
  File "/usr/src/homeassistant/homeassistant/components/http/auth.py", line 144, in auth_middleware
    return await handler(request)
  File "/usr/src/homeassistant/homeassistant/components/http/view.py", line 136, in handle
    result = await result
  File "/usr/src/homeassistant/homeassistant/components/calendar/__init__.py", line 209, in get
    event_list = await entity.async_get_events(
  File "/usr/src/homeassistant/homeassistant/components/caldav/calendar.py", line 131, in async_get_events
    return await self.data.async_get_events(hass, start_date, end_date)
  File "/usr/src/homeassistant/homeassistant/components/caldav/calendar.py", line 159, in async_get_events
    vevent_list = await hass.async_add_executor_job(
  File "/usr/local/lib/python3.9/concurrent/futures/thread.py", line 52, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.9/site-packages/caldav/objects.py", line 600, in date_search
    return self.search(root)
  File "/usr/local/lib/python3.9/site-packages/caldav/objects.py", line 612, in search
    response = self._query(xml, 1, 'report')
  File "/usr/local/lib/python3.9/site-packages/caldav/objects.py", line 164, in _query
    ret = getattr(self.client, query_method)(
  File "/usr/local/lib/python3.9/site-packages/caldav/davclient.py", line 167, in report
    return self.request(url, "REPORT", query,
  File "/usr/local/lib/python3.9/site-packages/caldav/davclient.py", line 250, in request
    r = requests.request(method, url, data=to_wire(body),
  File "/usr/local/lib/python3.9/site-packages/requests/api.py", line 61, in request
    return session.request(method=method, url=url, **kwargs)
  File "/usr/local/lib/python3.9/site-packages/requests/sessions.py", line 542, in request
    resp = self.send(prep, **send_kwargs)
  File "/usr/local/lib/python3.9/site-packages/requests/sessions.py", line 655, in send
    r = adapter.send(request, **kwargs)
  File "/usr/local/lib/python3.9/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPSConnectionPool(host='box.openmailbox.nl', port=443): Max retries exceeded with url: /cloud/remote.php/dav/calendars/m.vrauwdeunt%40openmailbox.nl/werkrooster/ (Caused by NewConnectionError('<urllib3.connection.HTTPSConnection object at 0x7f30c304fb20>: Failed to establish a new connection: [Errno -3] Try again'))
2021-10-11 12:59:28 ERROR (MainThread) [aiohttp.server] Error handling request
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/urllib3/connection.py", line 174, in _new_conn
    conn = connection.create_connection(
  File "/usr/local/lib/python3.9/site-packages/urllib3/util/connection.py", line 73, in create_connection
    for res in socket.getaddrinfo(host, port, family, socket.SOCK_STREAM):
  File "/usr/local/lib/python3.9/socket.py", line 954, in getaddrinfo
    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
socket.gaierror: [Errno -3] Try again

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py", line 699, in urlopen
    httplib_response = self._make_request(
  File "/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py", line 382, in _make_request
    self._validate_conn(conn)
  File "/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py", line 1010, in _validate_conn
    conn.connect()
  File "/usr/local/lib/python3.9/site-packages/urllib3/connection.py", line 358, in connect
    conn = self._new_conn()
  File "/usr/local/lib/python3.9/site-packages/urllib3/connection.py", line 186, in _new_conn
    raise NewConnectionError(
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPSConnection object at 0x7f30c2f8cd90>: Failed to establish a new connection: [Errno -3] Try again

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/requests/adapters.py", line 439, in send
    resp = conn.urlopen(
  File "/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py", line 755, in urlopen
    retries = retries.increment(
  File "/usr/local/lib/python3.9/site-packages/urllib3/util/retry.py", line 574, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPSConnectionPool(host='box.openmailbox.nl', port=443): Max retries exceeded with url: /cloud/remote.php/dav/calendars/m.vrauwdeunt%40openmailbox.nl/contact_birthdays/ (Caused by NewConnectionError('<urllib3.connection.HTTPSConnection object at 0x7f30c2f8cd90>: Failed to establish a new connection: [Errno -3] Try again'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/aiohttp/web_protocol.py", line 422, in _handle_request
    resp = await self._request_handler(request)
  File "/usr/local/lib/python3.9/site-packages/aiohttp/web_app.py", line 499, in _handle
    resp = await handler(request)
  File "/usr/local/lib/python3.9/site-packages/aiohttp/web_middlewares.py", line 119, in impl
    return await handler(request)
  File "/usr/src/homeassistant/homeassistant/components/http/security_filter.py", line 60, in security_filter_middleware
    return await handler(request)
  File "/usr/src/homeassistant/homeassistant/components/http/forwarded.py", line 220, in forwarded_middleware
    return await handler(request)
  File "/usr/src/homeassistant/homeassistant/components/http/request_context.py", line 24, in request_context_middleware
    return await handler(request)
  File "/usr/src/homeassistant/homeassistant/components/http/ban.py", line 78, in ban_middleware
    return await handler(request)
  File "/usr/src/homeassistant/homeassistant/components/http/auth.py", line 144, in auth_middleware
    return await handler(request)
  File "/usr/src/homeassistant/homeassistant/components/http/view.py", line 136, in handle
    result = await result
  File "/usr/src/homeassistant/homeassistant/components/calendar/__init__.py", line 209, in get
    event_list = await entity.async_get_events(
  File "/usr/src/homeassistant/homeassistant/components/caldav/calendar.py", line 131, in async_get_events
    return await self.data.async_get_events(hass, start_date, end_date)
  File "/usr/src/homeassistant/homeassistant/components/caldav/calendar.py", line 159, in async_get_events
    vevent_list = await hass.async_add_executor_job(
  File "/usr/local/lib/python3.9/concurrent/futures/thread.py", line 52, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.9/site-packages/caldav/objects.py", line 600, in date_search
    return self.search(root)
  File "/usr/local/lib/python3.9/site-packages/caldav/objects.py", line 612, in search
    response = self._query(xml, 1, 'report')
  File "/usr/local/lib/python3.9/site-packages/caldav/objects.py", line 164, in _query
    ret = getattr(self.client, query_method)(
  File "/usr/local/lib/python3.9/site-packages/caldav/davclient.py", line 167, in report
    return self.request(url, "REPORT", query,
  File "/usr/local/lib/python3.9/site-packages/caldav/davclient.py", line 250, in request
    r = requests.request(method, url, data=to_wire(body),
  File "/usr/local/lib/python3.9/site-packages/requests/api.py", line 61, in request
    return session.request(method=method, url=url, **kwargs)
  File "/usr/local/lib/python3.9/site-packages/requests/sessions.py", line 542, in request
    resp = self.send(prep, **send_kwargs)
  File "/usr/local/lib/python3.9/site-packages/requests/sessions.py", line 655, in send
    r = adapter.send(request, **kwargs)
  File "/usr/local/lib/python3.9/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPSConnectionPool(host='box.openmailbox.nl', port=443): Max retries exceeded with url: /cloud/remote.php/dav/calendars/m.vrauwdeunt%40openmailbox.nl/contact_birthdays/ (Caused by NewConnectionError('<urllib3.connection.HTTPSConnection object at 0x7f30c2f8cd90>: Failed to establish a new connection: [Errno -3] Try again'))
2021-10-11 12:59:28 ERROR (MainThread) [aiohttp.server] Error handling request
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/urllib3/connection.py", line 174, in _new_conn
    conn = connection.create_connection(
  File "/usr/local/lib/python3.9/site-packages/urllib3/util/connection.py", line 73, in create_connection
    for res in socket.getaddrinfo(host, port, family, socket.SOCK_STREAM):
  File "/usr/local/lib/python3.9/socket.py", line 954, in getaddrinfo
    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
socket.gaierror: [Errno -3] Try again

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py", line 699, in urlopen
    httplib_response = self._make_request(
  File "/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py", line 382, in _make_request
    self._validate_conn(conn)
  File "/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py", line 1010, in _validate_conn
    conn.connect()
  File "/usr/local/lib/python3.9/site-packages/urllib3/connection.py", line 358, in connect
    conn = self._new_conn()
  File "/usr/local/lib/python3.9/site-packages/urllib3/connection.py", line 186, in _new_conn
    raise NewConnectionError(
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPSConnection object at 0x7f30bbb6a850>: Failed to establish a new connection: [Errno -3] Try again

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/requests/adapters.py", line 439, in send
    resp = conn.urlopen(
  File "/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py", line 755, in urlopen
    retries = retries.increment(
  File "/usr/local/lib/python3.9/site-packages/urllib3/util/retry.py", line 574, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPSConnectionPool(host='box.openmailbox.nl', port=443): Max retries exceeded with url: /cloud/remote.php/dav/calendars/m.vrauwdeunt%40openmailbox.nl/feyenoord/ (Caused by NewConnectionError('<urllib3.connection.HTTPSConnection object at 0x7f30bbb6a850>: Failed to establish a new connection: [Errno -3] Try again'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/aiohttp/web_protocol.py", line 422, in _handle_request
    resp = await self._request_handler(request)
  File "/usr/local/lib/python3.9/site-packages/aiohttp/web_app.py", line 499, in _handle
    resp = await handler(request)
  File "/usr/local/lib/python3.9/site-packages/aiohttp/web_middlewares.py", line 119, in impl
    return await handler(request)
  File "/usr/src/homeassistant/homeassistant/components/http/security_filter.py", line 60, in security_filter_middleware
    return await handler(request)
  File "/usr/src/homeassistant/homeassistant/components/http/forwarded.py", line 220, in forwarded_middleware
    return await handler(request)
  File "/usr/src/homeassistant/homeassistant/components/http/request_context.py", line 24, in request_context_middleware
    return await handler(request)
  File "/usr/src/homeassistant/homeassistant/components/http/ban.py", line 78, in ban_middleware
    return await handler(request)
  File "/usr/src/homeassistant/homeassistant/components/http/auth.py", line 144, in auth_middleware
    return await handler(request)
  File "/usr/src/homeassistant/homeassistant/components/http/view.py", line 136, in handle
    result = await result
  File "/usr/src/homeassistant/homeassistant/components/calendar/__init__.py", line 209, in get
    event_list = await entity.async_get_events(
  File "/usr/src/homeassistant/homeassistant/components/caldav/calendar.py", line 131, in async_get_events
    return await self.data.async_get_events(hass, start_date, end_date)
  File "/usr/src/homeassistant/homeassistant/components/caldav/calendar.py", line 159, in async_get_events
    vevent_list = await hass.async_add_executor_job(
  File "/usr/local/lib/python3.9/concurrent/futures/thread.py", line 52, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.9/site-packages/caldav/objects.py", line 600, in date_search
    return self.search(root)
  File "/usr/local/lib/python3.9/site-packages/caldav/objects.py", line 612, in search
    response = self._query(xml, 1, 'report')
  File "/usr/local/lib/python3.9/site-packages/caldav/objects.py", line 164, in _query
    ret = getattr(self.client, query_method)(
  File "/usr/local/lib/python3.9/site-packages/caldav/davclient.py", line 167, in report
    return self.request(url, "REPORT", query,
  File "/usr/local/lib/python3.9/site-packages/caldav/davclient.py", line 250, in request
    r = requests.request(method, url, data=to_wire(body),
  File "/usr/local/lib/python3.9/site-packages/requests/api.py", line 61, in request
    return session.request(method=method, url=url, **kwargs)
  File "/usr/local/lib/python3.9/site-packages/requests/sessions.py", line 542, in request
    resp = self.send(prep, **send_kwargs)
  File "/usr/local/lib/python3.9/site-packages/requests/sessions.py", line 655, in send
    r = adapter.send(request, **kwargs)
  File "/usr/local/lib/python3.9/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPSConnectionPool(host='box.openmailbox.nl', port=443): Max retries exceeded with url: /cloud/remote.php/dav/calendars/m.vrauwdeunt%40openmailbox.nl/feyenoord/ (Caused by NewConnectionError('<urllib3.connection.HTTPSConnection object at 0x7f30bbb6a850>: Failed to establish a new connection: [Errno -3] Try again'))
2021-10-11 12:59:28 ERROR (MainThread) [aiohttp.server] Error handling request
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/urllib3/connection.py", line 174, in _new_conn
    conn = connection.create_connection(
  File "/usr/local/lib/python3.9/site-packages/urllib3/util/connection.py", line 73, in create_connection
    for res in socket.getaddrinfo(host, port, family, socket.SOCK_STREAM):
  File "/usr/local/lib/python3.9/socket.py", line 954, in getaddrinfo
    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
socket.gaierror: [Errno -3] Try again

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py", line 699, in urlopen
    httplib_response = self._make_request(
  File "/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py", line 382, in _make_request
    self._validate_conn(conn)
  File "/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py", line 1010, in _validate_conn
    conn.connect()
  File "/usr/local/lib/python3.9/site-packages/urllib3/connection.py", line 358, in connect
    conn = self._new_conn()
  File "/usr/local/lib/python3.9/site-packages/urllib3/connection.py", line 186, in _new_conn
    raise NewConnectionError(
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPSConnection object at 0x7f30c05f3940>: Failed to establish a new connection: [Errno -3] Try again

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/requests/adapters.py", line 439, in send
    resp = conn.urlopen(
  File "/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py", line 755, in urlopen
    retries = retries.increment(
  File "/usr/local/lib/python3.9/site-packages/urllib3/util/retry.py", line 574, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPSConnectionPool(host='box.openmailbox.nl', port=443): Max retries exceeded with url: /cloud/remote.php/dav/calendars/m.vrauwdeunt%40openmailbox.nl/personal/ (Caused by NewConnectionError('<urllib3.connection.HTTPSConnection object at 0x7f30c05f3940>: Failed to establish a new connection: [Errno -3] Try again'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/aiohttp/web_protocol.py", line 422, in _handle_request
    resp = await self._request_handler(request)
  File "/usr/local/lib/python3.9/site-packages/aiohttp/web_app.py", line 499, in _handle
    resp = await handler(request)
  File "/usr/local/lib/python3.9/site-packages/aiohttp/web_middlewares.py", line 119, in impl
    return await handler(request)
  File "/usr/src/homeassistant/homeassistant/components/http/security_filter.py", line 60, in security_filter_middleware
    return await handler(request)
  File "/usr/src/homeassistant/homeassistant/components/http/forwarded.py", line 220, in forwarded_middleware
    return await handler(request)
  File "/usr/src/homeassistant/homeassistant/components/http/request_context.py", line 24, in request_context_middleware
    return await handler(request)
  File "/usr/src/homeassistant/homeassistant/components/http/ban.py", line 78, in ban_middleware
    return await handler(request)
  File "/usr/src/homeassistant/homeassistant/components/http/auth.py", line 144, in auth_middleware
    return await handler(request)
  File "/usr/src/homeassistant/homeassistant/components/http/view.py", line 136, in handle
    result = await result
  File "/usr/src/homeassistant/homeassistant/components/calendar/__init__.py", line 209, in get
    event_list = await entity.async_get_events(
  File "/usr/src/homeassistant/homeassistant/components/caldav/calendar.py", line 131, in async_get_events
    return await self.data.async_get_events(hass, start_date, end_date)
  File "/usr/src/homeassistant/homeassistant/components/caldav/calendar.py", line 159, in async_get_events
    vevent_list = await hass.async_add_executor_job(
  File "/usr/local/lib/python3.9/concurrent/futures/thread.py", line 52, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/local/lib/python3.9/site-packages/caldav/objects.py", line 600, in date_search
    return self.search(root)
  File "/usr/local/lib/python3.9/site-packages/caldav/objects.py", line 612, in search
    response = self._query(xml, 1, 'report')
  File "/usr/local/lib/python3.9/site-packages/caldav/objects.py", line 164, in _query
    ret = getattr(self.client, query_method)(
  File "/usr/local/lib/python3.9/site-packages/caldav/davclient.py", line 167, in report
    return self.request(url, "REPORT", query,
  File "/usr/local/lib/python3.9/site-packages/caldav/davclient.py", line 250, in request
    r = requests.request(method, url, data=to_wire(body),
  File "/usr/local/lib/python3.9/site-packages/requests/api.py", line 61, in request
    return session.request(method=method, url=url, **kwargs)
  File "/usr/local/lib/python3.9/site-packages/requests/sessions.py", line 542, in request
    resp = self.send(prep, **send_kwargs)
  File "/usr/local/lib/python3.9/site-packages/requests/sessions.py", line 655, in send
    r = adapter.send(request, **kwargs)
  File "/usr/local/lib/python3.9/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPSConnectionPool(host='box.openmailbox.nl', port=443): Max retries exceeded with url: /cloud/remote.php/dav/calendars/m.vrauwdeunt%40openmailbox.nl/personal/ (Caused by NewConnectionError('<urllib3.connection.HTTPSConnection object at 0x7f30c05f3940>: Failed to establish a new connection: [Errno -3] Try again'))
2021-10-11 12:59:30 ERROR (MainThread) [custom_components.grocy] Error fetching grocy data: HTTPSConnectionPool(host='grocy.gladsheimr.nl', port=443): Max retries exceeded with url: /api/system/config (Caused by NewConnectionError('<urllib3.connection.HTTPSConnection object at 0x7f30bdd5ac40>: Failed to establish a new connection: [Errno -3] Try again'))
2021-10-11 13:00:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:00:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:00:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:00:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:00:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:00:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:00:03 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 13:00:17 ERROR (SyncWorker_8) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 13:00:17 WARNING (SyncWorker_8) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 13:00:23 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: None has no element 4 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].name }}'
2021-10-11 13:00:23 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: None has no element 4 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].id}}'
2021-10-11 13:00:23 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: None has no element 4 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[1].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 13:00:23 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: None has no element 4 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[2].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 13:00:23 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: None has no element 4 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[3].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 13:00:23 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: None has no element 4 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[4].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 13:00:23 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: None has no element 4 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[5].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 13:00:23 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: None has no element 4 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 13:00:27 WARNING (MainThread) [homeassistant.helpers.entity] Update of sensor.recipies is taking over 10 seconds
2021-10-11 13:00:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 13:00:36 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 13:01:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:01:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:01:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:01:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:01:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:01:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:01:08 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 13:01:17 ERROR (SyncWorker_8) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 13:01:17 WARNING (SyncWorker_8) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 13:01:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 13:01:40 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 13:02:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:02:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:02:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:02:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:02:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:02:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:02:12 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 13:02:17 ERROR (SyncWorker_10) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 13:02:17 WARNING (SyncWorker_10) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 13:02:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 13:02:44 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 13:03:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:03:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:03:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:03:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:03:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:03:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:03:16 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 13:03:17 ERROR (SyncWorker_5) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 13:03:17 WARNING (SyncWorker_5) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 13:03:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 13:03:48 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 13:04:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:04:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:04:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:04:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:04:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:04:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:04:17 ERROR (SyncWorker_2) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 13:04:17 WARNING (SyncWorker_2) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 13:04:21 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 13:04:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 13:04:53 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 13:05:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:05:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:05:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:05:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:05:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:05:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:05:17 ERROR (SyncWorker_8) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 13:05:17 WARNING (SyncWorker_8) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 13:05:26 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 13:05:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 13:05:58 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 13:06:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:06:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:06:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:06:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:06:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:06:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:06:17 ERROR (SyncWorker_10) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 13:06:17 WARNING (SyncWorker_10) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 13:06:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 13:06:30 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 13:07:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:07:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:07:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:07:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:07:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:07:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:07:02 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 13:07:17 ERROR (SyncWorker_3) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 13:07:17 WARNING (SyncWorker_3) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 13:07:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 13:07:34 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 13:08:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:08:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:08:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:08:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:08:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:08:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:08:06 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 13:08:17 ERROR (SyncWorker_0) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 13:08:17 WARNING (SyncWorker_0) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 13:08:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 13:08:38 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 13:09:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:09:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:09:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:09:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:09:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:09:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:09:10 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 13:09:17 ERROR (SyncWorker_0) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 13:09:17 WARNING (SyncWorker_0) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 13:09:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 13:09:42 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 13:10:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:10:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:10:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:10:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:10:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:10:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:10:14 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 13:10:17 ERROR (SyncWorker_7) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 13:10:17 WARNING (SyncWorker_7) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 13:10:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 13:10:46 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 13:11:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:11:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:11:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:11:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:11:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:11:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:11:17 ERROR (SyncWorker_8) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 13:11:17 WARNING (SyncWorker_8) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 13:11:18 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 13:11:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 13:11:50 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 13:12:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:12:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:12:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:12:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:12:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:12:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:12:17 ERROR (SyncWorker_4) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 13:12:17 WARNING (SyncWorker_4) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 13:12:23 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 13:12:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 13:12:55 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 13:13:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:13:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:13:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:13:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:13:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:13:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:13:17 ERROR (SyncWorker_8) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 13:13:17 WARNING (SyncWorker_8) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 13:13:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 13:13:28 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 13:14:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:14:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:14:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:14:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:14:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:14:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:14:00 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 13:14:17 ERROR (SyncWorker_6) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 13:14:17 WARNING (SyncWorker_6) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 13:14:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 13:14:32 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 13:15:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:15:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:15:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:15:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:15:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:15:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:15:04 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 13:15:17 ERROR (SyncWorker_4) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 13:15:17 WARNING (SyncWorker_4) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 13:15:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 13:15:36 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 13:16:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:16:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:16:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:16:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:16:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:16:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:16:08 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 13:16:17 ERROR (SyncWorker_0) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 13:16:17 WARNING (SyncWorker_0) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 13:16:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 13:16:40 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 13:17:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:17:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:17:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:17:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:17:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:17:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:17:12 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 13:17:17 ERROR (SyncWorker_2) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 13:17:17 WARNING (SyncWorker_2) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 13:17:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 13:17:44 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 13:18:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:18:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:18:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:18:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:18:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:18:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:18:16 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 13:18:17 ERROR (SyncWorker_6) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 13:18:17 WARNING (SyncWorker_6) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 13:18:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 13:18:33 ERROR (SyncWorker_10) [homeassistant.util.yaml.loader] while parsing a block mapping
  in "/config/integrations/../entities/shell_commands/add_ingredients_to_shopping.yaml", line 1, column 1
expected <block end>, but found '<scalar>'
  in "/config/integrations/../entities/shell_commands/add_ingredients_to_shopping.yaml", line 1, column 261
2021-10-11 13:18:33 ERROR (MainThread) [homeassistant.helpers.reload] while parsing a block mapping
  in "/config/integrations/../entities/shell_commands/add_ingredients_to_shopping.yaml", line 1, column 1
expected <block end>, but found '<scalar>'
  in "/config/integrations/../entities/shell_commands/add_ingredients_to_shopping.yaml", line 1, column 261
2021-10-11 13:18:49 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 13:18:50 WARNING (MainThread) [homeassistant.helpers.template] Template variable warning: 'recipe_id' is undefined when rendering '-X POST https://grocy.gladsheimr.nl/api/recipes/{{recipe_id}}/add-not-fulfilled-products-to-shoppinglist-H 'Accept: application/json' -H 'Content-Type: application/json' -H 'GROCY-API-KEY: {{grocy_key}}' -H 'cache-control: no-cache' -d '{'excludedProductIds': [0]}''
2021-10-11 13:18:50 WARNING (MainThread) [homeassistant.helpers.template] Template variable warning: 'grocy_key' is undefined when rendering '-X POST https://grocy.gladsheimr.nl/api/recipes/{{recipe_id}}/add-not-fulfilled-products-to-shoppinglist-H 'Accept: application/json' -H 'Content-Type: application/json' -H 'GROCY-API-KEY: {{grocy_key}}' -H 'cache-control: no-cache' -d '{'excludedProductIds': [0]}''
2021-10-11 13:18:50 ERROR (MainThread) [homeassistant.components.shell_command] Error running command: `curl -X POST https://grocy.gladsheimr.nl/api/recipes/{{recipe_id}}/add-not-fulfilled-products-to-shoppinglist-H 'Accept: application/json' -H 'Content-Type: application/json' -H 'GROCY-API-KEY: {{grocy_key}}' -H 'cache-control: no-cache' -d '{'excludedProductIds': [0]}'`, return code: 3
NoneType: None
2021-10-11 13:19:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:19:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:19:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:19:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:19:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:19:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:19:17 ERROR (SyncWorker_3) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 13:19:17 WARNING (SyncWorker_3) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 13:19:22 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 13:19:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 13:19:54 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 13:20:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:20:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:20:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:20:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:20:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:20:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:20:01 WARNING (MainThread) [homeassistant.helpers.template] Template variable warning: 'recipe_id' is undefined when rendering '-X POST https://grocy.gladsheimr.nl/api/recipes/{{recipe_id}}/add-not-fulfilled-products-to-shoppinglist-H 'Accept: application/json' -H 'Content-Type: application/json' -H 'GROCY-API-KEY: {{grocy_key}}' -H 'cache-control: no-cache' -d '{'excludedProductIds': [0]}''
2021-10-11 13:20:01 WARNING (MainThread) [homeassistant.helpers.template] Template variable warning: 'grocy_key' is undefined when rendering '-X POST https://grocy.gladsheimr.nl/api/recipes/{{recipe_id}}/add-not-fulfilled-products-to-shoppinglist-H 'Accept: application/json' -H 'Content-Type: application/json' -H 'GROCY-API-KEY: {{grocy_key}}' -H 'cache-control: no-cache' -d '{'excludedProductIds': [0]}''
2021-10-11 13:20:01 ERROR (MainThread) [homeassistant.components.shell_command] Error running command: `curl -X POST https://grocy.gladsheimr.nl/api/recipes/{{recipe_id}}/add-not-fulfilled-products-to-shoppinglist-H 'Accept: application/json' -H 'Content-Type: application/json' -H 'GROCY-API-KEY: {{grocy_key}}' -H 'cache-control: no-cache' -d '{'excludedProductIds': [0]}'`, return code: 3
NoneType: None
2021-10-11 13:20:17 ERROR (SyncWorker_4) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 13:20:17 WARNING (SyncWorker_4) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 13:20:27 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 13:20:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 13:20:28 WARNING (MainThread) [homeassistant.helpers.template] Template variable warning: 'recipe_id' is undefined when rendering '-X POST https://grocy.gladsheimr.nl/api/recipes/{{recipe_id}}/add-not-fulfilled-products-to-shoppinglist-H 'Accept: application/json' -H 'Content-Type: application/json' -H 'GROCY-API-KEY: {{grocy_key}}' -H 'cache-control: no-cache' -d '{'excludedProductIds': [0]}''
2021-10-11 13:20:28 WARNING (MainThread) [homeassistant.helpers.template] Template variable warning: 'grocy_key' is undefined when rendering '-X POST https://grocy.gladsheimr.nl/api/recipes/{{recipe_id}}/add-not-fulfilled-products-to-shoppinglist-H 'Accept: application/json' -H 'Content-Type: application/json' -H 'GROCY-API-KEY: {{grocy_key}}' -H 'cache-control: no-cache' -d '{'excludedProductIds': [0]}''
2021-10-11 13:20:28 ERROR (MainThread) [homeassistant.components.shell_command] Error running command: `curl -X POST https://grocy.gladsheimr.nl/api/recipes/{{recipe_id}}/add-not-fulfilled-products-to-shoppinglist-H 'Accept: application/json' -H 'Content-Type: application/json' -H 'GROCY-API-KEY: {{grocy_key}}' -H 'cache-control: no-cache' -d '{'excludedProductIds': [0]}'`, return code: 3
NoneType: None
2021-10-11 13:20:56 ERROR (SyncWorker_5) [homeassistant.util.yaml.loader] while parsing a block mapping
  in "/config/integrations/../entities/shell_commands/add_ingredients_to_shopping.yaml", line 1, column 1
expected <block end>, but found '<scalar>'
  in "/config/integrations/../entities/shell_commands/add_ingredients_to_shopping.yaml", line 1, column 261
2021-10-11 13:20:56 ERROR (MainThread) [homeassistant.helpers.reload] while parsing a block mapping
  in "/config/integrations/../entities/shell_commands/add_ingredients_to_shopping.yaml", line 1, column 1
expected <block end>, but found '<scalar>'
  in "/config/integrations/../entities/shell_commands/add_ingredients_to_shopping.yaml", line 1, column 261
2021-10-11 13:20:58 ERROR (SyncWorker_8) [homeassistant.util.yaml.loader] while parsing a block mapping
  in "/config/integrations/../entities/shell_commands/add_ingredients_to_shopping.yaml", line 1, column 1
expected <block end>, but found '<scalar>'
  in "/config/integrations/../entities/shell_commands/add_ingredients_to_shopping.yaml", line 1, column 261
2021-10-11 13:20:59 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 13:21:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:21:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:21:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:21:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:21:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:21:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:21:17 ERROR (SyncWorker_2) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 13:21:17 WARNING (SyncWorker_2) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 13:21:27 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 13:21:30 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: None has no element 4 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].name }}'
2021-10-11 13:21:30 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: None has no element 4 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].id}}'
2021-10-11 13:21:30 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: None has no element 4 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[1].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 13:21:30 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: None has no element 4 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[2].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 13:21:30 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: None has no element 4 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[3].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 13:21:30 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: None has no element 4 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[4].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 13:21:30 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: None has no element 4 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[5].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 13:21:30 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: None has no element 4 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 13:21:30 ERROR (MainThread) [homeassistant.components.template.template_entity] TemplateError('UndefinedError: None has no element 4') while processing template 'Template("{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].name }}")' for attribute '_attr_native_value' in entity 'sensor.cooking'
2021-10-11 13:21:30 ERROR (MainThread) [homeassistant.components.template.template_entity] TemplateError('UndefinedError: None has no element 4') while processing template 'Template("{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].id}}")' for attribute 'recipe_id' in entity 'sensor.cooking'
2021-10-11 13:21:30 ERROR (MainThread) [homeassistant.components.template.template_entity] TemplateError('UndefinedError: None has no element 4') while processing template 'Template("{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[1].split('<br />')[0]|replace('</li>','')}}")' for attribute 'step_1' in entity 'sensor.cooking'
2021-10-11 13:21:30 ERROR (MainThread) [homeassistant.components.template.template_entity] TemplateError('UndefinedError: None has no element 4') while processing template 'Template("{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[2].split('<br />')[0]|replace('</li>','')}}")' for attribute 'step_2' in entity 'sensor.cooking'
2021-10-11 13:21:30 ERROR (MainThread) [homeassistant.components.template.template_entity] TemplateError('UndefinedError: None has no element 4') while processing template 'Template("{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[3].split('<br />')[0]|replace('</li>','')}}")' for attribute 'step_3' in entity 'sensor.cooking'
2021-10-11 13:21:30 ERROR (MainThread) [homeassistant.components.template.template_entity] TemplateError('UndefinedError: None has no element 4') while processing template 'Template("{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[4].split('<br />')[0]|replace('</li>','')}}")' for attribute 'step_4' in entity 'sensor.cooking'
2021-10-11 13:21:30 ERROR (MainThread) [homeassistant.components.template.template_entity] TemplateError('UndefinedError: None has no element 4') while processing template 'Template("{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[5].split('<br />')[0]|replace('</li>','')}}")' for attribute 'step_5' in entity 'sensor.cooking'
2021-10-11 13:21:32 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
2021-10-11 13:21:40 ERROR (MainThread) [homeassistant.helpers.template] Template variable error: list object has no element 6 when rendering '{{ state_attr('sensor.recipies', 'recepten')[states('input_number.recipe_id')|round].description.split('<li>')[6].split('<br />')[0]|replace('</li>','')}}'
2021-10-11 13:21:40 ERROR (SyncWorker_3) [homeassistant.components.command_line] Command failed: /config/scripts/get_shopping_list.py
2021-10-11 13:21:40 WARNING (SyncWorker_3) [homeassistant.components.command_line.sensor] Empty reply found when expecting JSON data
2021-10-11 13:21:41 WARNING (MainThread) [homeassistant.helpers.template] Template variable warning: 'recipe_id' is undefined when rendering '-X POST https://grocy.gladsheimr.nl/api/recipes/{{recipe_id}}/add-not-fulfilled-products-to-shoppinglist-H 'Accept: application/json' -H 'Content-Type: application/json' -H 'GROCY-API-KEY: {{grocy_key}}' -H 'cache-control: no-cache' -d '{'excludedProductIds': [0]}''
2021-10-11 13:21:41 WARNING (MainThread) [homeassistant.helpers.template] Template variable warning: 'grocy_key' is undefined when rendering '-X POST https://grocy.gladsheimr.nl/api/recipes/{{recipe_id}}/add-not-fulfilled-products-to-shoppinglist-H 'Accept: application/json' -H 'Content-Type: application/json' -H 'GROCY-API-KEY: {{grocy_key}}' -H 'cache-control: no-cache' -d '{'excludedProductIds': [0]}''
2021-10-11 13:21:41 ERROR (MainThread) [homeassistant.components.shell_command] Error running command: `curl -X POST https://grocy.gladsheimr.nl/api/recipes/{{recipe_id}}/add-not-fulfilled-products-to-shoppinglist-H 'Accept: application/json' -H 'Content-Type: application/json' -H 'GROCY-API-KEY: {{grocy_key}}' -H 'cache-control: no-cache' -d '{'excludedProductIds': [0]}'`, return code: 3
NoneType: None
2021-10-11 13:22:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:22:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:22:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (30*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time') | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:22:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_local' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_local' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:22:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'as_timestamp' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'as_timestamp' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:22:00 WARNING (MainThread) [homeassistant.helpers.template] Template warning: 'timestamp_custom' got invalid input 'None' when rendering template '{{ (now().strftime("%s")| int + (5*60)) | timestamp_custom("%H:%M") == as_timestamp(state_attr('calendar.feyenoord', 'start_time')  | timestamp_local) | timestamp_custom("%H:%M") }}' but no default was specified. Currently 'timestamp_custom' will return 'None', however this template will fail to render in Home Assistant core 2021.12
2021-10-11 13:22:04 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved
Traceback (most recent call last):
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 134, in _handle_refresh_interval
    await self._async_refresh(log_failures=True, scheduled=True)
  File "/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py", line 265, in _async_refresh
    update_callback()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 456, in async_write_ha_state
    self._async_write_ha_state()
  File "/usr/src/homeassistant/homeassistant/helpers/entity.py", line 496, in _async_write_ha_state
    extra_state_attributes = self.device_state_attributes
  File "/config/custom_components/grocy/entity.py", line 142, in device_state_attributes
    return json.loads(json.dumps(data, cls=GrocyJSONEncoder))
  File "/usr/local/lib/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/local/lib/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/config/custom_components/grocy/json_encode.py", line 26, in default
    return json.JSONEncoder.default(self, o)
  File "/usr/local/lib/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ProductBarcodeData is not JSON serializable
