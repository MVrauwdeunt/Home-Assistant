#{% set start = as_timestamp(state_attr('calendar.werkrooster', 'start_time')) - (30*60) %}
platform: template
sensors:
  werken:
    value_template: >
      {% set start = as_timestamp(state_attr('calendar.werkrooster', 'start_time')) - (30*60) %}
      {% set stop = as_timestamp(state_attr('calendar.werkrooster', 'end_time')) + (30*60) %}
      {% set time = states('sensor.time') %}
      {{ time >= start|timestamp_custom('%H:%M')

      and time <= stop|timestamp_custom('%H:%M') }}